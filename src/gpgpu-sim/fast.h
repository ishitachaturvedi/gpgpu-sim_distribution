#include<vector>
using std::vector;
#include <stdio.h>
#include <fstream>

extern int cycle_num;
//initialise vector of vectors as stallData[Warp #][stall #]
extern vector<vector<vector<int>>>stallData;
extern vector<vector<int>>act_warp;
extern vector<vector<vector<int>>> str_status;
extern vector<int>warp_issue;
extern vector<int>icnt_pressure;

extern std::ofstream write_warps;
extern std::ofstream test_write_warps;
extern int max_active;
extern int actw;
extern int max_warps_act;
extern int max_sid;
extern int num_of_schedulers;
extern int numstall;
extern int cycles_passed;
extern int inst_counter;
extern int print_on;
extern int going_from_shader_to_mem;
extern int stall_cycles;
extern int tot_icnt_buffer;
extern int tot_inst_exec;
extern int tot_cycles_exec_all_SM;
extern int tot_inst_ret;

// Stats collection
extern int  mem_data_stall;
extern int  comp_data_stall;
extern int  ibuffer_stall;
extern int  comp_str_stall;
extern int  mem_str_stall;
extern int  other_stall1;
extern int  other_stall2;
extern int  other_stall3;
extern int mem_data_stall_issue_irr;
extern int comp_data_stall_issue_irr;
extern int ibuffer_stall_issue_irr;
extern int comp_str_stall_issue_irr;
extern int mem_str_stall_issue_irr;
extern int other_stall_issue_irr1;
extern int other_stall_issue_irr2;
extern int other_stall_issue_irr3;
extern int ICNT_TO_MEM_count;
extern int ICNT_TO_MEM_cycles;
extern int ROP_DELAY_count;
extern int ROP_DELAY_cycle;
extern int ICNT_TO_L2_QUEUE_count;
extern int ICNT_TO_L2_QUEUE_cycles;
extern int L2_TO_DRAM_QUEUE_count;
extern int L2_TO_DRAM_QUEUE_cycle;
extern int DRAM_LATENCY_QUEUE_count;
extern int DRAM_LATENCY_QUEUE_cycle;
extern int DRAM_TO_L2_QUEUE_count;
extern int DRAM_TO_L2_QUEUE_cycle;
extern int DRAM_L2_FILL_QUEUE_count;
extern int DRAM_L2_FILL_QUEUE_cycle;
extern int L2_TO_ICNT_count;
extern int L2_TO_ICNT_cycle;
extern int CLUSTER_TO_SHADER_QUEUE_count;
extern int CLUSTER_TO_SHADER_QUEUE_cycle;
extern int CLUSTER_TO_SHADER_QUEUE_1_count;
extern int CLUSTER_TO_SHADER_QUEUE_1_cycle;
extern int mem_issues;
extern int mem_cycle_counter;
extern int l2_cache_bank_access;
extern int l2_cache_bank_miss;
extern int l2_cache_access;
extern int l2_cache_miss;
extern int l2_pending;
extern int l2_res_fail;
extern int c_mem_resource_stall;
extern int s_mem_bk_conf;
extern int gl_mem_resource_stall;
extern int gl_mem_coal_stall;
extern int gl_mem_data_port_stall;
extern int icnt_creat_inj;
extern int icnt_creat_arrival;
extern int icnt_inj_arrival;
extern int icnt_creat_inj_READ_REQUEST;
extern int icnt_creat_arrival_READ_REQUEST;
extern int icnt_inj_arrival_READ_REQUEST;
extern int icnt_creat_inj_WRITE_REQUEST;
extern int icnt_creat_arrival_WRITE_REQUEST;
extern int icnt_inj_arrival_WRITE_REQUEST;
extern int icnt_creat_inj_READ_REPLY;
extern int icnt_creat_arrival_READ_REPLY;
extern int icnt_inj_arrival_READ_REPLY;
extern int icnt_creat_inj_WRITE_REPLY;
extern int icnt_creat_arrival_WRITE_REPLY;
extern int icnt_inj_arrival_WRITE_REPLY;
extern int icnt_mem_total_time_spend_Ishita;
extern int L2_cache_access_total_Ishita;
extern int L2_cache_access_miss_Ishita;
extern int L2_cache_access_pending_Ishita;
extern int L2_cache_access_resfail_Ishita;
extern int simple_dram_count;
extern int delay_tot_sum;
extern int hits_num_total;
extern int access_num_total;
extern int hits_read_num_total;
extern int read_num_total;
extern int hits_write_num_total;
extern int write_num_total;
extern int banks_1time_total;
extern int banks_acess_total_Ishita;
extern int banks_time_rw_total;
extern int banks_access_rw_total_Ishita;
extern int banks_time_ready_total;
extern int banks_access_ready_total_Ishita;
extern int bwutil_total;
extern int checked_L2_DRAM_here;
extern int ICNT_TO_SHADER_count;
extern int ICNT_TO_SHADER_cycles;
extern bool print_stall_data;
extern int SHADER_ICNT_PUSH;
extern int mem_inst_issue;
extern int comp_inst_issue;
extern int issued_inst_count;
extern int shared_cycle_count;
extern int constant_cycle_count;
extern int texture_cycle_count;
extern int memory_cycle_count;
extern int shared_cycle_cycle;
extern int constant_cycle_cycle;
extern int texture_cycle_cycle;
extern int memory_cycle_cycle;
extern int texture_issue_cycle;
extern int memory_issue_cycle;
extern int pushed_from_shader_icnt_l2_icnt;
extern int tex_icnt_l2_queue;
extern int icnt_ROP_queue;
extern int l2_queue_pop;
extern int l2_queue_reply;
extern int l2_dram_push;
extern int l2_dram_rop;
extern int l2_icnt_push;
extern int l2_dram_queue_pop;
extern int push_in_dram;
extern int push_from_dram;
extern int dram_l2_reached;
extern int icnt_back_to_shader;
extern int reached_shader_from_icnt;
extern int reach_tex_from_l2;
extern int reach_glob_from_icnt;
extern int reach_L1_from_tex;
extern int reached_global_from_glob;
extern int finish_inst;
extern int ROP_no_push_l2_queue_push;
extern int ROP_extra_cycles;
extern int l2_dram_rop_count;
extern int NO_INST_ISSUE;
extern int opp_for_ooo;
extern int opp_for_mem;
extern int dram_access_total;
extern int dram_write_req_total;
extern int dram_read_req_total;

// MEM STATS COLLECTION
extern int total_row_accesses_NET;
extern int total_num_activates_NET;
extern int tot_DRAM_reads;
extern int tot_DRAM_writes;
extern int gpu_stall_dramfull_total;
extern int gpu_stall_icnt2sh_total;
extern int mf_total_lat_tot;
extern int num_mfs_tot;
extern int icnt2mem_latency_tot;
extern int icnt2sh_latency_tot;
extern int n_act_tot;
extern int n_pre_tot;
extern int n_req_tot;
extern int n_rd_tot;
extern int n_wr_tot;
extern int total_dL1_misses;
extern int total_dL1_accesses;
extern int L2_total_cache_accesses;
extern int L2_total_cache_pending_hits;
extern int L2_total_cache_reservation_fails;
extern int L1I_total_cache_accesses;
extern int L1I_total_cache_misses;
extern int L1I_total_cache_pending_hits;
extern int L1I_total_cache_reservation_fails;
extern int L1D_total_cache_accesses;
extern int L1D_total_cache_misses;
extern int L1D_total_cache_pending_hits;
extern int L1C_total_cache_accesses;
extern int L1C_total_cache_misses;
extern int L1C_total_cache_pending_hits;
extern int L1C_total_cache_reservation_fails;
extern int L1T_total_cache_accesses;
extern int L1T_total_cache_misses;
extern int L1T_total_cache_pending_hits;
extern int L1T_total_cache_reservation_fails;
extern int L2_total_cache_misses;
extern int comp_inst_finish_time;
extern int mem_inst_finish_time;
extern int ibuffer_flush_count1;
extern int ibuffer_flush_count2;
extern int ibuffer_flush_count3;
extern int replay_flush_count;
extern int L1D_total_cache_reservation_fails;

extern int present_ongoing_cycle;